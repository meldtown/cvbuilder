<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="http://css.rabota.com.ua/theme/rua/css/masterpage.css" />
	<link rel="stylesheet" href="http://css.rabota.com.ua/theme/rua/css/blocks/select2.css" />
	<link rel="stylesheet" href="http://css.rabota.com.ua/Theme/css/jquery.mac.tinylight.css">
	<script src="node_modules/jquery/dist/jquery.js"></script>
	<script src="http://js.rabota.com.ua/src/js/tooltips.js"></script>
	<script src="http://js.rabota.com.ua/js/jquery-ui-1.10.3/ui/jquery-ui-1.10.3.custom.min.js"></script>
	<script src="http://js.rabota.com.ua/js/jquery.ui.tooltips.js"></script>
	<script src="http://css.rabota.com.ua/js/jquery.lazyload.min.js"></script>
	<script src="http://js.rabota.com.ua/src/js/controls/templates/header.js"></script>
	<script src="node_modules/knockout/build/output/knockout-latest.debug.js"></script><!--<script src="http://js.rabota.com.ua/js/knockout-3.3.0.js"></script>-->
	<script src="http://js.rabota.com.ua/js/bootstrap-2.3.2/js/bootstrap-carousel.js"></script>
	<script src="http://js.rabota.com.ua/js/select2-4.0.0/dist/js/select2.full.js"></script>
	<script src="http://js.rabota.com.ua/js/select2-4.0.0/dist/js/i18n/ru.js"></script>
	<script src="http://rua.mac.rabota.ua/js/jquery.mac.tinylight.js"></script>
	<style>
		html, body.rua-l-body {
			background-color: #F7F7F7;
		}
	</style>

	<script src="node_modules/moment/moment.js"></script>
	<script src="node_modules/moment/locale/ru.js"></script>
	<script src="node_modules/moment/locale/uk.js"></script>
	<script src="node_modules/knockout.validation/dist/knockout.validation.js"></script>
	<script src="node_modules/ko.editables/ko.editables.js"></script>

	<link rel="stylesheet" href="dist/cvbuilder.css">


</head>
<body class="rua-l-body">
	<div class="header header-default">
		<ul class="header-inner">
			<li class="header-item header-item-logo"><a class="header-link" href="/"><i class="ri_logo" style="padding-right: 0;"></i></a></li>
		</ul>
	</div>

	<div class="rua-l-wrapper2">
		<div data-bind="template: 'cvbuilder'"></div>
	</div>



	<div id="templates">
		<script id="cvbuilder" type="text/html"><!--#include file="html/cvbuilder.html"--></script>
		<script id="contacts-form" type="text/html"><!--#include file="html/contacts-form.html"--></script>
		<script id="contacts-view" type="text/html"><!--#include file="html/contacts-view.html"--></script>
		<script id="education-form" type="text/html"><!--#include file="html/education-form.html"--></script>
		<script id="education-view" type="text/html"><!--#include file="html/education-view.html"--></script>
		<script id="experience-form" type="text/html"><!--#include file="html/experience-form.html"--></script>
		<script id="experience-view" type="text/html"><!--#include file="html/experience-view.html"--></script>
		<script id="personal-form" type="text/html"><!--#include file="html/personal-form.html"--></script>
		<script id="personal-view" type="text/html"><!--#include file="html/personal-view.html"--></script>
		<script id="phone-form" type="text/html"><!--#include file="html/phone-form.html"--></script>
		<script id="phone-view" type="text/html"><!--#include file="html/phone-view.html"--></script>
		<script id="additional-form" type="text/html"><!--#include file="html/additional-form.html"--></script>
		<script id="additional-view" type="text/html"><!--#include file="html/additional-view.html"--></script>
		<script id="training-form" type="text/html"><!--#include file="html/training-form.html"--></script>
		<script id="training-view" type="text/html"><!--#include file="html/training-view.html"--></script>
		<script id="position-form" type="text/html"><!--#include file="html/position-form.html"--></script>
		<script id="position-view" type="text/html"><!--#include file="html/position-view.html"--></script>
		<script id="language-form" type="text/html"><!--#include file="html/language-form.html"--></script>
		<script id="language-view" type="text/html"><!--#include file="html/language-view.html"--></script>
		<script id="skill-form" type="text/html"><!--#include file="html/skill-form.html"--></script>
		<script id="skill-view" type="text/html"><!--#include file="html/skill-view.html"--></script>
		<script id="moving-form" type="text/html"><!--#include file="html/moving-form.html"--></script>
		<script id="moving-view" type="text/html"><!--#include file="html/moving-view.html"--></script>
		<script id="datepicker-widget" type="text/html"><!--#include file="html/datepicker-widget.html"--></script>
	</div>

	<script src="js/Helpers.js"></script>

	<script src="js/DatePickerWidget.js"></script>

	<script src="js/DictionaryModel.js"></script>

	<script src="js/ResumeContactsModel.js"></script>
	<script src="js/ResumeEducationModel.js"></script>
	<script src="js/ResumeExperienceModel.js"></script>
	<script src="js/ResumePersonalModel.js"></script>
	<script src="js/ResumeAdditionalModel.js"></script>
	<script src="js/ResumeTrainingModel.js"></script>
	<script src="js/ResumePositionModel.js"></script>
	<script src="js/ResumeLanguageModel.js"></script>
	<script src="js/ResumeSkillModel.js"></script>

	<script src="js/CvBuilderModel.js"></script>

	<script>
		var api = 'http://' + location.hostname.replace('cvbuilder', 'api');
		var resumeId = 3496188; //TODO: readme from query string, e.g. (window.location.toString().split('?').pop().match(/resumeId=\d+/) || 'resumeId=0').replace('resumeId=', '')

		jQuery.when(
			jQuery.getJSON(api + '/dictionary/language'),
			jQuery.getJSON(api + '/dictionary/experience'),
			jQuery.getJSON(api + '/dictionary/education'),
			jQuery.getJSON(api + '/dictionary/city'),
			jQuery.getJSON(api + '/dictionary/branch'),
			jQuery.getJSON(api + '/dictionary/schedule'),
			jQuery.getJSON(api + '/dictionary/resource'),
			jQuery.getJSON(api + '/dictionary/activitylevel'),
			jQuery.getJSON(api + '/dictionary/language/skill'),
			jQuery.getJSON(api + '/dictionary/additional'),
			jQuery.getJSON(api + '/dictionary/sex')
		).then(function (language, experience, education, city, branch, schedule, resource, activityLevel, languageSkill, additional, sex) {
//			experience = experience[0].reduce(function (dictionary, item) {
//				dictionary[item.id] = new DictionaryModel(model, item);
//				return dictionary;
//			}, {});
			var dictionary = {
				language: language[0],
				experience: experience[0],
				educationType: education[0].slice(1),
				city: city[0],
				branch: branch[0],
				schedule: schedule[0],
				resource: resource[0],
				activityLevel: activityLevel[0],
				languageSkill: languageSkill[0],
				additional: additional[0],
				sex: sex[0]
			};

			window.model = new CvBuilderModel(api, resumeId, dictionary);
			ko.applyBindings(model);
		});
	</script>

	<!--suppress JSUnresolvedLibraryURL -->
	<script id="__bs_script__">document.write('<script async src="http://HOST:3000/browser-sync/browser-sync-client.2.12.8.js"><\/script>'.replace('HOST', location.hostname))</script>
</body>
</html>
